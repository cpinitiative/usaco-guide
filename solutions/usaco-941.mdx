---
id: usaco-941
source: USACO Bronze 2019 Open
title: Cow Evolution
author: Jesse Choe, Ryan Chou, Vivian Han
---

## Solution 
[Official Analysis](http://www.usaco.org/current/data/sol_evolution_bronze_open19.html)

## Video Solution
<Youtube id="4YTijr0BbrA" />

## Implementation

**Time Complexity:** $\mathcal{O}(N^2)$

<LanguageSection>

<JavaSection>
```java
import java.io.*;
import java.util.*;

public class Evolution {

    static boolean[][] hasChar = new boolean[25][125];
    static Map<String, Integer> convert = new HashMap<>();

    public static void main(String[] args) {
        try {
            BufferedReader br = new BufferedReader(new FileReader("evolution.in"));
            int popNum = Integer.parseInt(br.readLine());
            int nxtIdx = 0;
            for (int i = 0 ; i < popNum; i++) {
                String[] line = br.readLine().split(" ");
                for (int j = 1; j < line.length; j++) {
                    if (!convert.containsKey(line[j])) {
                        convert.put(line[j], nxtIdx++);
                    }
                    int idx = convert.get(line[j]);
                    hasChar[i][idx] = true;
                }
            }
            br.close();

            boolean works = true;
            for (int a = 0; a < nxtIdx && works; a++) {
                for (int b = 0; b < a && works; b++) {
                    int aNum = 0;
                    int bNum = 0;
                    int abNum = 0;
                    for (int i = 0; i < popNum; i++) {
                        if (hasChar[i][a] && hasChar[i][b]) abNum++;
                        else if (hasChar[i][a]) aNum++;
                        else if (hasChar[i][b]) bNum++;
                    }
                    works = works && !(aNum>0 && bNum>0 && abNum>0);
                }
            }

            BufferedWriter bw = new BufferedWriter(new FileWriter("evolution.out"));
            bw.write((works)? "yes\n": "no\n");
            bw.close();
        }
        catch (Exception e) {
            System.out.println(e.getMessage());
        }
    }
}
```
</JavaSection>

<PySection>
  
```py
import sys
sys.stdin = open('evolution.in', 'r')
sys.stdout = open('evolution.out', 'w')

n = int(input())
cows = []
allchars = set()

for i in range(n):
	line = input().split()
	chars = list(line[1:])
	cows.append(chars)
	allchars.update(chars)

allchars = list(allchars)

# Check if the tree is evolutionarily proper relative to characteristics a and b
def scan(a, b):
	""""
	If we find a cow which has the characteristic a, 
	another cow which has the characteristic b, and 
	another cow with both characteristics a and b, then 
	the tree isn't evolutionarily proper.
	
	Returns a boolean
	"""
	onlya, onlyb, both = 0, 0, 0
	# Iterating through every branch.
	for i in range(n):
		hasa, hasb = 0, 0
		# Iterating through the characteristics of that branch.
		for j in range(len(cows[i])):
			if cows[i][j] == allchars[a]:
				hasa = 1
			if cows[i][j] == allchars[b]:
				hasb = 1
		if hasa and not hasb: 
			onlya = 1
		if hasb and not hasa:
			onlyb = 1
		if hasa and hasb:
			both = 1
	return onlya and onlyb and both
	
# Iterating through every pair of characteristics.
for i in range(len(allchars)):
	for j in range(i + 1, len(allchars)):
		if scan(i, j):
			print('no')
			sys.exit()
print('yes')
```
</PySection>
</LanguageSection>
