---
id: cses-2417
source: CSES
title: Counting Reorders
author: Ashok Narayan
---

## Explanation


## Implementation

**Time Complexity:** $\mathcal{O}()$, 

<LanguageSection>
<CPPSection>

```cpp
#include <bits/stdc++.h>
using namespace std;

const int MAXA = 1e6 + 5;

int main(){
	ios::sync_with_stdio(0);
	cin.tie(0);
	
	int n; cin >> n;
	
	vector<int> freq(MAXA, 0);
	int maxVal = 0;
	
	int x;
	for (int i = 0; i < n; ++i){
		cin >> x;
		freq[x]++;
		maxVal = max(maxVal, x);
	}
	
	vector<long long> count(maxVal + 1, 0);
	vector<long long> pairs(maxVal + 1, 0); 
	
	for (int d = 1; d <= maxVal; ++d)
		for (int mult = d; mult <= maxVal; mult += d)
			count[d] += freq[mult];
	
	// Inclusion - Exclusion Principle application
	for (int d = maxVal; d >= 1; --d){
		long long total = count[d] * (count[d] - 1) /2;
		
		for (int mult = 2*d; mult <= maxVal; mult += d)
			total -= pairs[mult];
		
		pairs[d] = total;
	}
	
	cout << pairs[1] << '\n';
	return 0;
}
```

</CPPSection>
</LanguageSection>
