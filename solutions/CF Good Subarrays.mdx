---
id: cf-1398C
source: CF
title: Good Subarrays
author: Jesse Choe
---
[Official Editorial](https://codeforces.com/blog/entry/81506)

<LanguageSection>

<CPPSection>

## Solution - Prefix Sums + Math

```cpp
#include <bits/stdc++.h>
using namespace std;
using ll = long long;
using pi = pair<ll, ll>;
void solve(){
    int n; cin >> n;
    vector<int> dp(n+1, 0);
    for(int i=1; i<=n; i++){
        char c; cin >> c;
        dp[i] = c - '0';
    }
    for(int i=1; i<=n; i++){
        dp[i] += dp[i-1];
    }
    map<int, ll> sumDist;
    for(int i=0; i<=n; i++){
        sumDist[dp[i] - i]++;
    }
    ll goodArrays = 0;
    for(pi p: sumDist){
        ll f = p.second;
        goodArrays += f * (f-1) / 2;
    }
    cout << goodArrays << endl;
}

int main(){
    int t; cin >> t;
    for(int i=0; i<t; i++){
        solve();
    }
}
```
</CPPSection>

</LanguageSection>
