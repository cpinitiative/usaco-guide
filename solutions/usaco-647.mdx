---
id: usaco-647
source: USACO Gold 2016 Open
title: '248'
author: Melody Yu (Video), Qi Wang
---

[Official Analysis](http://www.usaco.org/current/data/sol_248_gold_open16.html)

## Video Solution

Note: The video solution might not be the same as other solutions. Code in C++.
<Youtube id="OdHxOYICx-o" />


## Implementation

**Time Complexity:** $\mathcal{O}(N^3)$

<LanguageSection>
<JavaSection>

```java
import java.util.*;
import java.io.*;

public class U248 {
	public static void main(String[] args) throws IOException {
		Kattio io = new Kattio("248");

		int N = io.nextInt();
		int[] board = new int[N];

		int[][] dp = new int[N + 1][N + 1];
		for (int i = 0; i < N; i++) {
			board[i] = io.nextInt();
			dp[i + 1][i + 1] = board[i];
		}

		int max_val = 0;
		for(int i = N - 1; i >= 1; i--) {
			for(int j = i + 1; j <= N; j++) {
				for (int k = i; k < j; k++) {
					if (dp[i][k] == dp[k + 1][j]) {
						dp[i][j] = Math.max(dp[i][j], dp[i][k] + 1);
					}
				}

				max_val = Math.max(max_val, dp[i][j]);
			}
		}

		io.println(max_val);
		io.close();
	}

	//CodeSnip{Kattio}
}
```

</JavaSection>
</LanguageSection>
